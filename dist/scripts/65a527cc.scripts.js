!function(){this.App=angular.module("codingTheHumanitiesApp",["ngResource"]).config(["$routeProvider",function(a){return a.when("/",{templateUrl:"views/_visualisation.html",controller:"VisualisationCtrl"}).when("/vision",{templateUrl:"views/_vision.html",controller:"VisionCtrl"}).when("/people",{templateUrl:"views/_people.html",controller:"PeopleCtrl"}).when("/events",{templateUrl:"views/_events.html",controller:"EventsCtrl"}).when("/code",{templateUrl:"views/_code.html",controller:"CodeCtrl"}).when("/test",{templateUrl:"views/_code.html",controller:"TestCtrl"}).otherwise({redirectTo:"/"})}])}.call(this),function(){this.MainCtrl=["$scope",function(a){return a.title="Coding the Humanities"}]}.call(this),function(){this.VisionCtrl=["$scope","visionFactory",function(a,b){var c,d;return c=b,d=function(){return a.visionConcepts=c.query({conceptName:"vision"},function(){return $.each(a.visionConcepts,function(a,b){return b.rank=function(){return b.ranked?"ranked":void 0}}),a.currentConcept=a.visionConcepts[0]})},d(),a.setCurrentConcept=function(b){return a.currentConcept=b}}]}.call(this),function(){this.VisualisationCtrl=["$scope","conceptFactory","$http",function(a,b){var c,d;return c=b,d=function(){return a.pastConcepts=c.query({conceptName:"past_concepts"},function(){return $.each(a.pastConcepts,function(a,b){return b.ranked?b.ranked="ranked":void 0})}),a.futureConcepts=c.query({conceptName:"future_concepts"},function(){return $.each(a.futureConcepts,function(a,b){return b.ranked?b.ranked="ranked":void 0})}),a.pusher=new Pusher("26da32a9b80140bcf9a7"),a.channel=a.pusher.subscribe("concepts")},d(),a.channel.bind("live",function(b){return a.$apply(function(){return console.log(a.concepts),$.each(a.pastConcepts,function(a,c){return c.live=!1,c.name===b.message?c.live="live":void 0}),$.each(a.futureConcepts,function(a,c){return c.live=!1,c.name===b.message?c.live="live":void 0})})})}]}.call(this),function(){this.PeopleCtrl=["$scope","visionFactory",function(a,b){var c,d;return c=b,d=function(){return a.peopleConcepts=c.query({conceptName:"people"},function(){return $.each(a.peopleConcepts,function(a,b){return b.rank=function(){return b.ranked?"ranked":void 0}}),a.currentConcept=a.peopleConcepts[0]})},d(),a.setCurrentConcept=function(b){return a.currentConcept=b}}]}.call(this),function(){this.EventsCtrl=["$scope","conceptFactory",function(a,b){var c,d;return c=b,d=function(){return a.eventsConcepts=c.query({conceptName:"concepts"},function(){return $.each(a.eventsConcepts,function(a,b){return b.rank=function(){return b.ranked?"ranked":void 0}})})},d()}]}.call(this),function(){this.CodeCtrl=["$scope","visionFactory",function(a,b){var c,d;return c=b,d=function(){return a.codeConcepts=c.query({conceptName:"code"},function(){return $.each(a.codeConcepts,function(a,b){return b.rank=function(){return b.ranked?"ranked":void 0}}),a.currentConcept=a.codeConcepts[0]})},d(),a.setCurrentConcept=function(b){return a.currentConcept=b}}]}.call(this),function(){this.TestCtrl=["$scope","conceptFactory","$http",function(a,b,c){var d,e;return d=b,e=function(){return a.codeConcepts=[{name:"loading..."}],c.get("http://twitter-humanities.herokuapp.com/api/concepts").success(function(b){return a.codeConcepts=b})},e()}]}.call(this),function(){this.App.factory("conceptFactory",["$resource",function(a){return a("http://twitter-humanities.herokuapp.com/api/:conceptName",{conceptName:"@name"})}]),this.App.factory("visionFactory",["$resource",function(a){return a("http://gist-humanities.herokuapp.com/api/:conceptName",{conceptName:"@name"})}])}.call(this),function(){this.App.directive("concepts",function(){return{restrict:"E",replace:!0,scope:{list:"="},template:"<div class='concepts span6'><div ng-repeat='concept in list' class='span2 {{concept.ranked}} {{concept.live}}'>{{ concept.name }}</div></div>"}}),this.App.directive("menu",function(){return{restrict:"E",replace:!0,scope:{list:"=",clickMenuLink:"&"},template:"<div class='span6 menu'><div ng-repeat='concept in list' class='span6 menu_item {{concept.ranked}} {{concept.live}}' ng-click='clickMenuLink({concept: concept})'>{{ concept.name }}</div></div>"}}),this.App.directive("codemenu",function(){return{restrict:"E",replace:!0,scope:{list:"=",clickMenuLink:"&"},template:"<div class='span6 menu'><div ng-repeat='concept in list' class='span3 menu_item code {{concept.ranked}} {{concept.live}}' ng-click='clickMenuLink({concept: concept})'>{{ concept.name }}</div></div>"}}),this.App.directive("profile",function(){return{restrict:"E",replace:!0,scope:{concept:"="},template:"<div class='profile span6'><div class='box'><img ng-src='{{concept.image}}'/></div><h3>{{ concept.name }}</h3><div ng-bind-html-unsafe='concept.description'></div></div>"}}),this.App.directive("textblock",function(){return{restrict:"E",replace:!0,scope:{concept:"="},template:"<div class='text span6'><div class='box'><img ng-src='{{concept.image}}'/></div><h3>{{ concept.name }}</h3><div ng-bind-html-unsafe='concept.description'></div></div>"}})}.call(this);